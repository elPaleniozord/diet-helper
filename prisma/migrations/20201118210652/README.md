# Migration `20201118210652`

This migration has been generated by elPaleniozord at 11/18/2020, 10:06:53 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."users_data" DROP CONSTRAINT "users_data_userId_fkey"

ALTER TABLE "public"."users_data" ADD COLUMN "bmr" integer   ,
ADD COLUMN "tdee" integer   ,
DROP COLUMN "userId",
ADD COLUMN "userId" integer   NOT NULL 

ALTER TABLE "public"."users_data" ADD FOREIGN KEY("userId")REFERENCES "public"."users"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201118135002..20201118210652
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -50,9 +50,9 @@
   image         String?
   createdAt     DateTime  @default(now()) @map(name: "created_at")
   updatedAt     DateTime  @default(now()) @map(name: "updated_at")
   role          Role      @default(USER)
-  userData      UserData?  
+  userData      UserData 
   logs          Log[]
   favorites     Favorite[]
   @@map(name: "users")
@@ -70,15 +70,17 @@
 }
 model UserData {
   id          Int     @default(autoincrement()) @id
-  user        User?    @relation(fields: [userId], references: [email])
-  userId      String?
+  user        User    @relation(fields:  [userId], references: [id])
+  userId      Int
   height      Int?
   weight      Int?
   age         Int?
   gender      Gender?
   goal        String?
+  bmr         Int?
+  tdee        Int?
   kcal        Int?
   prot        Int?
   carb        Int?
   fats        Int?
```


